(window.webpackJsonp=window.webpackJsonp||[]).push([[17,15],{406:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var r=n(167),o=n(168),c=(n(31),function(){function e(t){Object(r.a)(this,e),this.pngToLabel=t}return Object(o.a)(e,[{key:"encode",value:function(object){return console.log({toencode:object}),{flipX:object.flipX,flipY:object.flipY,top:object.top,left:object.left,angle:object.angle,scaleX:object.scaleX,scaleY:object.scaleY,width:object.width,height:object.height,src:this.pngToLabel[object.src]}}}]),e}()),l=function(){function e(t){Object(r.a)(this,e),this.labelToPng=t}return Object(o.a)(e,[{key:"_decode",value:function(object){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=JSON.parse(JSON.stringify(object));t.flipX=object.flipX,t.flipY=object.flipY,t.top=object.top*e,t.left=object.left*e,t.angle=object.angle,t.scaleX=object.scaleX*e,t.scaleY=object.scaleY*e,t.width=object.width,t.height=object.height,t.src=this.labelToPng[object.src]}},{key:"decode",value:function(object){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=JSON.parse('{"type":"image","version":"5.3.0","originX":"left","originY":"top","left":396.78,"top":191.9,"width":473,"height":528,"fill":"rgb(0,0,0)","stroke":null,"strokeWidth":0,"strokeDashArray":null,"strokeLineCap":"butt","strokeDashOffset":0,"strokeLineJoin":"miter","strokeUniform":false,"strokeMiterLimit":4,"scaleX":0.29,"scaleY":0.29,"angle":345.56,"flipX":false,"flipY":false,"opacity":1,"shadow":null,"visible":true,"backgroundColor":"","fillRule":"nonzero","paintFirst":"fill","globalCompositeOperation":"source-over","skewX":0,"skewY":0,"cropX":0,"cropY":0,"crossOrigin":null,"filters":[]}');return t.flipX=object.flipX,t.flipY=object.flipY,t.top=object.top*e,t.left=object.left*e,t.angle=object.angle,t.scaleX=object.scaleX*e,t.scaleY=object.scaleY*e,t.width=object.width,t.height=object.height,t.src=this.labelToPng[object.src],t}}]),e}()},407:function(e,t,n){var content=n(413);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(101).default)("403a5475",content,!0,{sourceMap:!1})},410:function(e,t,n){"use strict";n.r(t);var r,o,c,l,d,h,f,v,m,y,w,_=n(12),O=n(103),x=n(2),j=(n(54),n(164),n(31),n(62),n(16),n(26),n(449),n(102),n(46),n(47),n(411),n(243),n(450)),k=n(3),U=n(81),R=n(406),A=k.c.div(r||(r=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  max-width: 90vw;\n  gap: 8px;\n"]))),C=k.c.div(o||(o=Object(x.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),S=Object(k.c)("div",{disabled:Boolean})(c||(c=Object(x.a)(["\n  text-align: center;\n  padding: 12px 20px;\n  border: 1px solid;\n  border-color: ",";\n  border-radius: 12px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: ",";\n  opacity: ",";\n"])),(function(e){return e.theme.text1}),(function(e){return e.disabled?"not-allowed":"pointer"}),(function(e){return e.disabled?"0.5":"1"})),T={components:{Wrapper:A,UploaderWrapper:C,Uploader:Object(k.c)(S)(l||(l=Object(x.a)(["\n\n"]))),UndoRedoWrapper:k.c.div(d||(d=Object(x.a)(["\n  overflow: auto;\n  width: 100%;\n"]))),UndoRedoButton:Object(k.c)(S)(h||(h=Object(x.a)(["\n  border-color: ",";\n  float: left;\n  min-height: 60px;\n  max-height: 60px;\n  margin-right: 16px;\n  width: calc(25% - 12px);\n  transition: background-color .1s ease-in;\n\n  &:hover {\n    background-color: ",";\n  }\n\n  &:last-child {\n    border-color: ",";\n    width: calc(50% - 12px);\n    margin-right: 0;\n\n    &:hover {\n      background-color: ",";\n    }\n  }\n\n  img {\n    max-width: 30px;\n    height: auto;\n    width: auto;\n  }\n"])),(function(e){return e.theme.text3}),(function(e){var t=e.disabled,n=e.theme;return!t&&Object(U.c)(.9,n.text3)}),(function(e){return e.theme.red1}),(function(e){var t=e.disabled,n=e.theme;return!t&&Object(U.c)(.9,n.red1)})),Controls:k.c.div(f||(f=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n"]))),Overlays:k.c.div(v||(v=Object(x.a)(["\n  overflow: auto;\n  width: 100%;\n"]))),AddHatButton:Object(k.c)(S)(m||(m=Object(x.a)(["\n  border-color: ",";\n  float: left;\n  min-height: 60px;\n  max-height: 60px;\n  margin-right: 14px;\n  width: calc((100% - ","px)/5 - 1px);\n  transition: background-color .1s ease-in;\n\n  &:hover {\n    background-color: ",";\n  }\n\n  &:last-child {\n    margin-right: 0;\n  }\n\n  img {\n    max-width: 30px;\n    height: auto;\n    width: auto;\n  }\n"])),(function(e){return e.theme.blue1}),51.2,(function(e){var t=e.disabled,n=e.theme;return!t&&Object(U.c)(.85,n.blue1)})),DownloadButton:Object(k.c)(S)(y||(y=Object(x.a)(["\n  border-color: ",";\n"])),(function(e){return e.theme.yellow1})),EditCanvas:Object(k.c)("canvas",{disabled:Boolean})(w||(w=Object(x.a)(["\n  border: 1px dashed ",";\n  opacity: ",";\n  max-width: 90vw;\n  width: 100%;\n  height: 300px;\n"])),(function(e){return e.theme.text1}),(function(e){return e.disabled?"0.7":"1"}))},props:{historyIndex:{type:Number,default:null},historyLength:{type:Number,default:null},nonAddControlsAbove:{type:Boolean,default:!1},canvasId:{type:String,default:"canvas"},dataURI:{type:String,default:null},current:{type:String,default:null},labelToUri:{type:Object,default:null},uriToLabel:{type:Object,default:null}},data:function(){return{objectEncoder:null,objectDecoder:null,currentlySelected:null,ready:!1,__canvas:null,latestManualUpdate:null}},computed:{undoDisabled:function(){return!this.ready||(!("number"==typeof this.historyIndex&&"number"==typeof this.historyLength&&this.historyIndex>=0)||this.historyIndex<=0)},redoDisabled:function(){return!this.ready||(!("number"==typeof this.historyIndex&&"number"==typeof this.historyLength&&this.historyIndex>=0)||this.historyIndex===this.historyLength-1)},removeAllOverlaysDisabled:function(){return!this.ready||0===this.totalObjects},totalObjects:function(){if(this.current)return JSON.parse(this.current).length},undoText:function(){return"Undo"+(this.$isMobile()?"":" (U)")},redoText:function(){return"Redo"+(this.$isMobile()?"":" (R)")},removeAllOverlaysText:function(){return"Remove All Overlays"+(this.$isMobile()?"":" (X)")}},watch:{dataURI:function(){this.init()},current:function(){console.log("current() watcher called"),this.ready&&this.current!==this.getCurrentCanvasDataStr()?this.applyCurrentObjects("current changed"):console.log("skipping update, not ready or same canvas string")}},methods:{applyCurrentObjects:function(e){var t,n=this;console.log("applyCurrentObjects called",JSON.parse(this.current).length,"from",e),(t=this.__canvas).remove.apply(t,Object(O.a)(this.__canvas.getObjects())),this.__canvas.renderAll();var r=JSON.parse(this.current).map((function(e){return n.objectDecoder.decode(e)}));console.log("Enlivening"+r.length),j.fabric.util.enlivenObjects(r,(function(e){var t=canvas.renderOnAddRemove;n.__canvas.renderOnAddRemove=!1,e.forEach((function(e){n.__canvas.add(e)})),n.__canvas.renderOnAddRemove=t,n.__canvas.renderAll(),console.log(n.__canvas.getObjects().length)}))},deselectAll:function(){var e,t;null===(e=this.__canvas)||void 0===e||e.discardActiveObject(),null===(t=this.__canvas)||void 0===t||t.requestRenderAll()},cloneSelected:function(){var e=this;console.log("CloneSelected",this.__canvas.getActiveObject()),this.__canvas.getActiveObject().clone((function(t){t.set({left:e.__canvas.getActiveObject().left+10,top:e.__canvas.getActiveObject().top+10,evented:!0}),e.__canvas.discardActiveObject(),"activeSelection"===t.type?(t.canvas=e.__canvas,t.forEachObject((function(t){e.__canvas.add(t)})),t.setCoords()):e.__canvas.add(t),e.__canvas.setActiveObject(t),e.__canvas.requestRenderAll()}))},getPngUri:function(){return this.$refs[this.canvasId].$el.toDataURL("image/png")},getCurrentCanvasDataStr:function(){var e=this,t=this.__canvas.getObjects().map((function(e){return e.toJSON()})).map((function(t){return e.objectEncoder.encode(t)}));return JSON.stringify(t)},handleUpdate:function(e){var t=this.getCurrentCanvasDataStr();console.log("Sending ".concat(JSON.parse(t).length," objects from ").concat(e)),this.latestManualUpdate=t,this.$emit("updated",t)},undo:function(){this.ready&&this.$emit("undo")},redo:function(){this.ready&&this.$emit("redo")},removeAllOverlays:function(){var e;this.removeAllOverlaysDisabled||((e=this.__canvas).remove.apply(e,Object(O.a)(this.__canvas.getObjects())),this.__canvas.renderAll(),this.handleUpdate("removeAllOverlays"))},removeSelectedOverlays:function(){var e;(e=this.__canvas).remove.apply(e,Object(O.a)(this.currentlySelected)),this.__canvas.renderAll(),this.handleUpdate("removeSelectedOverlays")},download:function(){this.ready&&(this.__canvas&&(this.__canvas.selection=!1),this.__canvas.renderAll(),this.$refs.canvas.$el.toBlob((function(e){var t=URL.createObjectURL(e),link=document.createElement("a");link.download="hatted.png",link.href=t,document.body.appendChild(link),link.click(),URL.revokeObjectURL(t),link.remove()}),"image/png"))},init:function(){var e=this;if(this.ready=!1,this.dataURI){this.__canvas&&(this.__canvas.clear(),this.__canvas.dispose());var t=this,canvas=this.__canvas=new j.fabric.Canvas(this.canvasId,{selection:!0,width:t.$refs.canvas.$el.offsetWidth});this.__canvas.selection=!1,this.__canvas.on("object:modified",(function(){e.handleUpdate("object:modified")})),this.__canvas.on("mouse:dblclick",(function(){return e.cloneSelected()})),this.__canvas.on("selection:created",(function(n){e.currentlySelected=n.selected,n.selected.forEach((function(e){return e.bringToFront()})),t.handleUpdate("selection:created")})),this.__canvas.on("selection:updated",(function(n){e.currentlySelected=n.selected,n.selected.forEach((function(e){return e.bringToFront()})),t.handleUpdate("selection:updated")})),this.__canvas.on("selection:cleared",(function(t){e.currentlySelected=null})),j.fabric.Image.fromURL(this.dataURI,(function(img){var e=img.height/img.width,n=canvas.width,r=Math.floor(parseInt(t.$refs.canvas.$el.style.width)*e);canvas.setHeight(r),t.$emit("latestWidth",n),canvas.setBackgroundImage(img,canvas.renderAll.bind(canvas),{scaleX:canvas.width/img.width,scaleY:canvas.height/img.height}),t.reloadHatMaf()}))}},reloadHatMaf:function(){var e=this,canvas=this.__canvas,img=document.createElement("img");img.src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='utf-8'%3F%3E%3C!DOCTYPE svg PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3E%3Csvg version='1.1' id='Ebene_1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='595.275px' height='595.275px' viewBox='200 215 230 470' xml:space='preserve'%3E%3Ccircle style='fill:%23F44336;' cx='299.76' cy='439.067' r='218.516'/%3E%3Cg%3E%3Crect x='267.162' y='307.978' transform='matrix(0.7071 -0.7071 0.7071 0.7071 -222.6202 340.6915)' style='fill:white;' width='65.545' height='262.18'/%3E%3Crect x='266.988' y='308.153' transform='matrix(0.7071 0.7071 -0.7071 0.7071 398.3889 -83.3116)' style='fill:white;' width='65.544' height='262.179'/%3E%3C/g%3E%3C/svg%3E",j.fabric.Object.prototype.transparentCorners=!1,j.fabric.Object.prototype.cornerColor="blue",j.fabric.Object.prototype.cornerStyle="circle";var t=function(img){var e=.5*canvas.width,t=.5*canvas.height,n=e/img.width,r=t/img.height,o=Math.min(n,r);img.scale(o),img.set({left:(canvas.width-img.getScaledWidth())/2,top:(canvas.height-img.getScaledHeight())/2,originX:"left",originY:"top"}),canvas.add(img).renderAll().setActiveObject(img)},n=function(){var n=Object(_.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.ready){n.next=2;break}return n.abrupt("return");case 2:new j.fabric.Image.fromURL(e.labelToUri.hat,t);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),r=function(){var n=Object(_.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.ready){n.next=2;break}return n.abrupt("return");case 2:new j.fabric.Image.fromURL(e.labelToUri.dog,t);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),o=function(){var n=Object(_.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.ready){n.next=2;break}return n.abrupt("return");case 2:new j.fabric.Image.fromURL(e.labelToUri.shark,t);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),c=function(){var n=Object(_.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.ready){n.next=2;break}return n.abrupt("return");case 2:new j.fabric.Image.fromURL(e.labelToUri.cat,t);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),l=function(){var n=Object(_.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.ready){n.next=2;break}return n.abrupt("return");case 2:console.log(e.labelToUri.redacted),new j.fabric.Image.fromURL(e.labelToUri.redacted,t);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();j.fabric.Object.prototype.controls.deleteControl=new j.fabric.Control({x:.5,y:-.5,offsetY:16,cursorStyle:"pointer",mouseUpHandler:function(t,n){var r=n.target,canvas=r.canvas;canvas.remove(r),canvas.requestRenderAll(),e.handleUpdate("deleteObject")},render:function(e,t,n,r,o){var c=this.cornerSize;e.save(),e.translate(t,n),e.rotate(j.fabric.util.degreesToRadians(o.angle)),e.drawImage(img,-c/2,-c/2,c,c),e.restore()},cornerSize:24}),e.$refs.addHatBtn.$el.onclick=function(){n()},e.$refs.addDogBtn.$el.onclick=function(){r()},e.$refs.addSharkBtn.$el.onclick=function(){o()},e.$refs.addCatBtn.$el.onclick=function(){c()},e.$refs.addRedactedBtn.$el.onclick=function(){l()},e.ready=!0,e.applyCurrentObjects("fabric.Image.fromURL")}},mounted:function(){this.objectEncoder=new R.b(this.uriToLabel),this.objectDecoder=new R.a(this.labelToUri),this.init()}},L=T,B=(n(412),n(19)),component=Object(B.a)(L,(function(){var e=this,t=e._self._c;return t("Wrapper",[e.nonAddControlsAbove?e._e():t("UndoRedoWrapper",[t("UndoRedoButton",{attrs:{disabled:e.undoDisabled},on:{click:e.undo}},[e._v(e._s(e.undoText))]),e._v(" "),t("UndoRedoButton",{attrs:{disabled:e.redoDisabled},on:{click:e.redo}},[e._v(e._s(e.redoText))]),e._v(" "),t("UndoRedoButton",{attrs:{disabled:e.removeAllOverlaysDisabled},on:{click:e.removeAllOverlays}},[e._v(e._s(e.removeAllOverlaysText))])],1),e._v(" "),t("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.deselectAll,expression:"deselectAll"}]},[t("EditCanvas",{ref:"canvas",staticStyle:{"border-radius":"14px"},attrs:{disabled:!e.ready,id:e.canvasId}})],1),e._v(" "),e.nonAddControlsAbove?t("UndoRedoWrapper",[t("UndoRedoButton",{attrs:{disabled:e.undoDisabled},on:{click:e.undo}},[e._v(e._s(e.undoText))]),e._v(" "),t("UndoRedoButton",{attrs:{disabled:e.redoDisabled},on:{click:e.redo}},[e._v(e._s(e.redoText))]),e._v(" "),t("UndoRedoButton",{attrs:{disabled:e.removeAllOverlaysDisabled},on:{click:e.removeAllOverlays}},[e._v(e._s(e.removeAllOverlaysText))])],1):e._e(),e._v(" "),t("Controls",[t("Overlays",[t("AddHatButton",{ref:"addHatBtn",attrs:{disabled:!e.ready}},[t("img",{attrs:{src:"/overlays/hat.png"}})]),e._v(" "),t("AddHatButton",{ref:"addDogBtn",attrs:{disabled:!e.ready}},[t("img",{attrs:{src:"/overlays/dog.png"}})]),e._v(" "),t("AddHatButton",{ref:"addSharkBtn",attrs:{disabled:!e.ready}},[t("img",{attrs:{src:"/overlays/shark.png"}})]),e._v(" "),t("AddHatButton",{ref:"addCatBtn",attrs:{disabled:!e.ready}},[t("img",{attrs:{src:"/overlays/cat.png"}})]),e._v(" "),t("AddHatButton",{ref:"addRedactedBtn",attrs:{disabled:!e.ready}},[t("img",{attrs:{src:"/overlays/redacted.png"}})])],1)],1)],1)}),[],!1,null,"7495358a",null);t.default=component.exports},412:function(e,t,n){"use strict";n(407)},413:function(e,t,n){var r=n(100)((function(i){return i[1]}));r.push([e.i,".controls[data-v-7495358a]{display:inline-block}",""]),r.locals={},e.exports=r},439:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(12);n(54),n(16),n(62),n(31),n(26);function o(e){return new Promise((function(t,n){var img=new Image;img.onload=function(){t({width:img.width,height:img.height})},img.onerror=n,img.src=e}))}var c=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(t,n,r,c){var l,d,h,canvas,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(t);case 2:return l=e.sent,d=l.width,h=l.height,canvas=new fabric.Canvas(null,{width:d,height:h}),f=d/r,e.next=9,new Promise((function(e,n){fabric.Image.fromURL(t,(function(img){canvas.setBackgroundImage(img,(function(){canvas.renderAll(),e()}),{scaleX:d/img.width,scaleY:h/img.height})}),{crossOrigin:"anonymous"})}));case 9:return e.next=11,new Promise((function(e,t){var r=JSON.parse(n).map((function(e){return c.decode(e,f)}));console.log({ratio:f,objects:r}),fabric.util.enlivenObjects(r,(function(t){t.forEach((function(e){canvas.add(e)})),canvas.renderAll(),e()}))}));case 11:return e.abrupt("return",canvas.lowerCanvasEl.toDataURL());case 12:case"end":return e.stop()}}),e)})));return function(t,n,r,o){return e.apply(this,arguments)}}()},440:function(e,t,n){"use strict";n(414),n(16),n(415),n(416),n(417),n(418),n(419),n(420),n(421),n(422),n(423),n(424),n(425),n(426),n(427),n(428),n(429),n(430),n(431),n(432),n(433),n(434),n(435),n(436),n(437),n(438),n(46),n(47),n(411),n(243);t.a=function(e,t){var n;n=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var r=e.split(",")[0].split(":")[1].split(";")[0],o=new Uint8Array(n.length),i=0;i<n.length;i++)o[i]=n.charCodeAt(i);var c=new Blob([o],{type:r}),l=URL.createObjectURL(c),link=document.createElement("a");link.download=t,link.href=l,document.body.appendChild(link),link.click(),URL.revokeObjectURL(l),link.remove()}},442:function(e,t,n){var content=n(460);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(101).default)("2662a8c3",content,!0,{sourceMap:!1})},451:function(e,t){},452:function(e,t){},453:function(e,t){},459:function(e,t,n){"use strict";n(442)},460:function(e,t,n){var r=n(100)((function(i){return i[1]}));r.push([e.i,".controls[data-v-19042273]{display:inline-block}",""]),r.locals={},e.exports=r},476:function(e,t,n){"use strict";n.r(t);var r,o,c,l=n(12),d=n(2),h=(n(54),n(3)),f=n(439),v=n(406),m=n(60),y=n(440),w=h.c.div(r||(r=Object(d.a)(["\n  display: flex;\n  flex-direction: column;\n  max-width: 90vw;\n  gap: 8px;\n"]))),_=Object(h.c)("div",{disabled:Boolean})(o||(o=Object(d.a)(["\n  padding: 12px 20px;\n  border: 1px solid;\n  border-color: ",";\n  border-radius: 12px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: ",";\n  opacity: ",";\n"])),(function(e){return e.theme.text1}),(function(e){return e.disabled?"not-allowed":"pointer"}),(function(e){return e.disabled?"0.5":"1"})),O={components:{Wrapper:w,DownloadButton:Object(h.c)(_)(c||(c=Object(d.a)(["\n  border-color: ",";\n"])),(function(e){return e.theme.yellow1}))},props:{dataURI:{type:String,default:null},labelToUri:{type:String,default:null},uriToLabel:{type:String,default:null}},data:function(){return{latestManualUpdate:null,latestWidth:null}},computed:{historyLength:function(){var e;return null===(e=this.$store.state.image.history)||void 0===e?void 0:e.length},historyIndex:function(){return this.$store.state.image.index},current:function(){return this.$store.getters[m.a.GET_CURRENT]}},methods:{setLatestWidth:function(e){this.latestWidth=e},handleUpdate:function(e){this.$store.commit(m.b.UPDATE,e)},undo:function(){this.$store.commit(m.b.UNDO)},redo:function(){this.$store.commit(m.b.REDO)},removeAllOverlays:function(){this.$refs.editor.removeAllOverlays()},removeSelectedOverlays:function(){this.$refs.editor.removeSelectedOverlays()},download:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var n,r,o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new v.a(e.labelToUri),r=e.dataURI,o=e.$store.getters[m.a.GET_CURRENT],t.next=5,Object(f.a)(r,o,e.latestWidth,n);case 5:c=t.sent,Object(y.a)(c,"hatted.png");case 7:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;this.handleUpdate("[]"),this.keyboardHandler=function(t){switch((t.ctrlKey||t.metaKey)&&("z"!==t.key||t.shiftKey?("z"===t.key&&t.shiftKey||"Z"===t.key&&t.shiftKey)&&e.redo():e.undo()),t.key){case"Backspace":console.log("Backspace key pressed"),e.removeSelectedOverlays();break;case"u":console.log("U key pressed"),e.undo();break;case"r":console.log("R key pressed"),e.redo();break;case"x":console.log("D key pressed"),e.removeAllOverlays()}},window.addEventListener("keydown",this.keyboardHandler)},beforeDestroy:function(){window.removeEventListener("keydown",this.keyboardHandler)}},x=(n(459),n(19)),component=Object(x.a)(O,(function(){var e=this,t=e._self._c;return t("Wrapper",[t("Editor",{ref:"editor",attrs:{nonAddControlsAbove:!1,dataURI:e.dataURI,current:e.current,labelToUri:e.labelToUri,uriToLabel:e.uriToLabel,historyIndex:e.historyIndex,historyLength:e.historyLength},on:{latestWidth:e.setLatestWidth,updated:e.handleUpdate,undo:e.undo,redo:e.redo}}),e._v(" "),t("DownloadButton",{on:{click:e.download}},[e._v("Download 👇")])],1)}),[],!1,null,"19042273",null);t.default=component.exports;installComponents(component,{Editor:n(410).default})}}]);